"use strict";(self.webpackChunkyoteyo_app=self.webpackChunkyoteyo_app||[]).push([[993],{"./src/stories/Calendar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MobileSize:()=>MobileSize,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Calendar_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),useQuery=__webpack_require__("./node_modules/@tanstack/react-query/build/modern/useQuery.js");new(__webpack_require__("./node_modules/@tanstack/query-core/build/modern/queryClient.js").E);var distribution=__webpack_require__("./node_modules/ky/distribution/index.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");const yoteyoAPI=distribution.Ay.create({prefixUrl:"/api",hooks:{beforeRequest:[async()=>{console.log("before!")}],afterResponse:[async()=>{console.log("after!")}],beforeError:[error=>error]}});var dist=__webpack_require__("./node_modules/@lukemorales/query-key-factory/dist/index.mjs");const calendarKeys=(0,dist.DY)("calendar",{events:()=>({queryKey:["events"]}),settings:()=>({queryKey:["settings"]})}),productsKeys=(0,dist.DY)("products",{list:()=>({queryKey:["get-products"]}),detail:id=>({queryKey:["get-product",id]})}),queryKeys=(0,dist.h0)(calendarKeys,productsKeys);var dateConverter_console=__webpack_require__("./node_modules/console-browserify/index.js");function parseDateString(str){const[year,month,day,hour,minute]=str.split("-").map(Number);return{year,month,day,hour,minute}}function fixDate({year,month,day,hour=0,minute=0}){return new Date(year,month-1,day,hour,minute)}const calendarService={events:async()=>{const{result,isMondayStart}=await async function getUserEvents(){return await yoteyoAPI("getCalendarEvents",{method:"get",headers:{"Content-Type":"application/json"}})}().then(res=>res.json());return{events:function convertStringToDate(apiResponse){return dateConverter_console.log(apiResponse[0].start),apiResponse.map(res=>({...res,start:fixDate(parseDateString(res.start)),end:fixDate(parseDateString(res.end))}))}(result),isMondayStart}},setting:async()=>(await async function getUserSetting(){return await yoteyoAPI("getUserSettings",{method:"get",headers:{"Content-Type":"application/json"}})}()).json()},CalendarContext=(0,react.createContext)(null);var class_variance_authority_dist=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),react_big_calendar_esm=__webpack_require__("./node_modules/react-big-calendar/dist/react-big-calendar.esm.js"),format=(__webpack_require__("./node_modules/react-big-calendar/lib/css/react-big-calendar.css"),__webpack_require__("./node_modules/date-fns/format.js")),parse=__webpack_require__("./node_modules/date-fns/parse.js"),startOfWeek=__webpack_require__("./node_modules/date-fns/startOfWeek.js"),getDay=__webpack_require__("./node_modules/date-fns/getDay.js"),addMonths=__webpack_require__("./node_modules/date-fns/addMonths.js"),subMonths=__webpack_require__("./node_modules/date-fns/subMonths.js"),ko=__webpack_require__("./node_modules/date-fns/locale/ko.js");var next_image=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.mjs");function CalendarEvent({start,end,title,color,stage,allDay}){const imagePath=function selectStageBadge(stage){switch(stage){case 1:return"/calendar/badge-1.png";case 2:return"/calendar/badge-2.png";case 3:return"/calendar/badge-3.png";default:return"/calendar/badge-4.png"}}(stage);return(0,jsx_runtime.jsxs)("div",{className:"flex flex-row h-[20px] rounded-[4px] text-[11px] overflow-hidden",style:{backgroundColor:color},children:[(0,jsx_runtime.jsx)("div",{className:"w-[2px] h-full bg-amber-500"}),(0,jsx_runtime.jsxs)("div",{className:"w-full flex justify-center",children:[(0,jsx_runtime.jsx)(next_image.A,{src:imagePath,alt:"badge",width:10,height:10,className:"object-contain"}),(0,jsx_runtime.jsx)("div",{className:"truncate flex items-center",children:title})]})]})}CalendarEvent.__docgenInfo={description:"",methods:[],displayName:"CalendarEvent"};var en_US=__webpack_require__("./node_modules/date-fns/locale/en-US.js"),calendar=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/calendar.js"),settings=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/settings.js");function CalendarToolbar({date,onNavigate}){const formatted=(0,format.GP)(date,"MMMM",{locale:en_US.c});return(0,jsx_runtime.jsxs)("div",{className:"w-full flex justify-between",children:[(0,jsx_runtime.jsx)("span",{className:"text-[30px] font-bold",children:formatted}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-row items-center gap-[14px]",children:[(0,jsx_runtime.jsx)(calendar.A,{size:24}),(0,jsx_runtime.jsx)(settings.A,{size:24})]})]})}function CalendarMonthHeader({date}){const day=(0,format.GP)(date,"EEE",{locale:en_US.c});return(0,jsx_runtime.jsx)("div",{className:"text-center font-bold text-[#999999] text-[14px] border-none",children:day})}CalendarToolbar.__docgenInfo={description:"",methods:[],displayName:"CalendarToolbar"},CalendarMonthHeader.__docgenInfo={description:"",methods:[],displayName:"CalendarMonthHeader"};var isSameDay=__webpack_require__("./node_modules/date-fns/isSameDay.js"),tailwind_utils=__webpack_require__("./src/utils/tailwind-utils.ts");const dateHeadVariants=(0,class_variance_authority_dist.F)("",{variants:{variant:{custom:"\n          flex justify-center items-center\n          w-[48px] h-[24px] text-[14px]\n        "}}});function CalendarDateHeader(props){const{date,label,isOffRange}=props,day=date.getDay(),isToday=(0,isSameDay.r)(date,new Date);return(0,jsx_runtime.jsx)("div",{className:(0,tailwind_utils.cn)(dateHeadVariants({variant:"custom"})),children:(0,jsx_runtime.jsxs)("div",{className:(0,tailwind_utils.cn)("m-0 p-o w-[20px] h-[20px] flex justify-center items-center",0===day&&"text-red-500",6===day&&"text-blue-500",isOffRange&&"opacity-50",isToday&&"bg-main rounded-full text-white font-normal"),children:[(0,format.GP)(date,"d")," "]})})}CalendarDateHeader.__docgenInfo={description:"",methods:[],displayName:"CalendarDateHeader"};const calendarVariants=(0,class_variance_authority_dist.F)("w-full h-full\n  [&_.rbc-row-bg]:!right-[0]\n  [&_.rbc-date-cell]:!pr-0\n  [&_.rbc-event]:!p-0\n  [&_.rbc-today]:!bg-transparent\n  [&_.rbc-off-range-bg]:!bg-transparent\n  [&_.rbc-date-cell]:!pb-[4px]\n  [&_.rbc-event]:!mb-[3px]\n  [&_.rbc-event]:!bg-transparent\n  [&_.rbc-event-content]:truncate text-[12px]\n  [&_.rbc-date-cell]:!flex\n  [&_.rbc-date-cell]:!justify-center\n  ",{variants:{variant:{clearBorder:"\n          [&_.rbc-month-view]:border-none! \n          [&_.rbc-day-bg]:border-none!\n          [&_.rbc-header]:border-none!\n          [&_.rbc-month-row]:border-none!\n          ",default:""}}});function CalendarView(){const{events,isMondayStart,currentDate,setCurrentDate,calendarHight}=function useCalendarContext(){const calendarCtx=(0,react.useContext)(CalendarContext);if(!calendarCtx)throw new Error("useCalendarContext must be inside <UserCalendar>");return calendarCtx}(),containerRef=(0,react.useRef)(null),lastScrollTime=(0,react.useRef)(0),localizer=(0,react_big_calendar_esm.Hz)({format:format.GP,parse:parse.qg,startOfWeek:()=>(0,startOfWeek.k)(new Date,{weekStartsOn:isMondayStart?1:0}),getDay:getDay.P,locales:{ko:ko.ko}});return(0,react.useEffect)(()=>{const container=containerRef.current;if(!container)return;const handleWheel=e=>{const now=Date.now();now-lastScrollTime.current<500||(lastScrollTime.current=now,e.preventDefault(),e.deltaY>0?setCurrentDate(prev=>(0,addMonths.P)(prev,1)):e.deltaY<0&&setCurrentDate(prev=>(0,subMonths.a)(prev,1)))};return container.addEventListener("wheel",handleWheel,{passive:!1}),()=>container.removeEventListener("wheel",handleWheel)},[isMondayStart]),(0,jsx_runtime.jsx)("div",{ref:containerRef,children:(0,jsx_runtime.jsx)(react_big_calendar_esm.Vv,{className:calendarVariants({variant:"clearBorder"}),localizer,events,startAccessor:"start",endAccessor:"end",view:"month",date:currentDate,onNavigate:setCurrentDate,style:{height:calendarHight},popup:!0,components:{event:eventProps=>(0,jsx_runtime.jsx)(CalendarEvent,{...eventProps.event}),toolbar:CalendarToolbar,month:{header:CalendarMonthHeader,dateHeader:CalendarDateHeader}}})})}function CustomCalendar({children,calendarHightPx}){const{data,status}=(0,useQuery.I)({queryKey:queryKeys.calendar.events().queryKey,queryFn:calendarService.events}),[currentDate,setCurrentDate]=(0,react.useState)(new Date);return"pending"===status?(0,jsx_runtime.jsx)("p",{children:"이벤트를 불러오는 중입니다..."}):"success"!==status?null:(0,jsx_runtime.jsx)(CalendarContext.Provider,{value:{events:(null==data?void 0:data.events)||[],isMondayStart:(null==data?void 0:data.isMondayStart)||!0,currentDate,setCurrentDate,calendarHight:calendarHightPx},children})}CalendarView.__docgenInfo={description:"",methods:[],displayName:"CalendarView"},CustomCalendar.View=CalendarView;const features_calendar=CustomCalendar;CustomCalendar.__docgenInfo={description:"",methods:[{name:"View",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"CustomCalendar",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},calendarHightPx:{required:!0,tsType:{name:"string"},description:""}}};const calendarEventsMock=[{title:"팀 회의를 해야하는데 아마 이때가 적당하지 않을까 생각하는데요...?",start:new Date(2025,6,8,10,0),end:new Date(2025,6,8,11,30),color:"#1A73E8",stage:1,allDay:!1},{title:"디자인 리뷰",start:new Date(2025,6,9,13,0),end:new Date(2025,6,9,14,0),color:"#F97316",stage:2,allDay:!1},{title:"개발 완료",start:new Date(2025,6,11),end:new Date(2025,6,11),color:"#22C55E",stage:3,allDay:!0},{title:"올리브영 특가 할인세일 처럼 이름이 길면 어떻게 랜더링 되는지 몹시 궁금해서 테스트를 해봅니다.",start:new Date(2025,6,11),end:new Date(2025,6,17),color:"#F97316",stage:2,allDay:!0},{title:"2일짜리 스케쥴은 5일보다 아래?",start:new Date(2025,6,11,13,0),end:new Date(2025,6,12,12,0),color:"#F97316",stage:2,allDay:!0}],Calendar_stories={title:"Components/CustomCalendar",component:features_calendar,args:{calendarHightPx:"645px"},argTypes:{calendarHightPx:{control:{type:"text"},description:"캘린더의 높이를 px 단위로 지정"}}},MobileSize={render:args=>{const[currentDate,setCurrentDate]=(0,react.useState)(new Date);return(0,jsx_runtime.jsx)("div",{className:"w-screen flex justify-center",children:(0,jsx_runtime.jsx)("div",{className:"w-[363px]",children:(0,jsx_runtime.jsx)(CalendarContext.Provider,{value:{events:calendarEventsMock,isMondayStart:!0,currentDate,setCurrentDate,calendarHight:args.calendarHightPx},children:(0,jsx_runtime.jsx)(features_calendar.View,{})})})})}},__namedExportsOrder=["MobileSize"]},"./src/utils/tailwind-utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cn:()=>cn});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__.QP)((0,clsx__WEBPACK_IMPORTED_MODULE_1__.$)(inputs))}}}]);